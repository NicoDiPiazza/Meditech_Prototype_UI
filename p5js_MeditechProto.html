<!DOCTYPE html>
<html> 
  <head>
    <title>Processing.JS inside Webpages: Template</title> 
  </head>
  <body>
	<!--This draws the canvas on the webpage -->
    <canvas id="mycanvas"></canvas> 
	<audio id="audio" src="ring-G.mp3"></audio>
  </body>
 
  <!-- Include the processing.js library -->
  <!-- See https://khanacademy.zendesk.com/hc/en-us/articles/202260404-What-parts-of-ProcessingJS-does-Khan-Academy-support- for differences -->
  <script src="https://cdn.jsdelivr.net/processing.js/1.4.8/processing.min.js"></script> 
  <script>




  var programCode = function(processingInstance) {
    with (processingInstance) {

	
	var width = 1500;
	var height = 700;
	
      size(width, height); 
      frameRate(30);
        
      // Paste code from Khan Academy here:


	var buttonDimensions = function(givenPage){
		NButtons = givenPage.NButtons;
		// butts used to be a shortening of buttons so that I wasn't initializing a variable twice... but now it's just for fun.
		let butts = [];
		for(i = 0; i < NButtons; i++){
		newButton = new Button(i, (givenPage.width/NButtons)*i + spread/2, (givenPage.height/3), (givenPage.width/NButtons - spread), givenPage.height/3, myDarkBlue);
		butts.push(newButton)


		};

		return butts;
	};

	var pageDisplay = function(givenPage, buttons){

		NButtons = givenPage.NButtons;

		for (i = 0; i < NButtons; i++){
			let color = buttons[i].color;
			fill(color[0], color[1], color[2]);
			rect(buttons[i].x, buttons[i].y, buttons[i].width, buttons[i].height);
		};

	}

	var mousePressed = function(){
		// anything you want to happen on a mouse click goes in here. I don't like this function.

		background(myLightBlue[0], myLightBlue[1], myLightBlue[2]);

		let hitboxes = buttonDimensions(currentPage);

		for (i = 0; i < currentPage.NButtons; i++){
			if(hitboxes[i].x <= mouseX && mouseX <= hitboxes[i].x + hitboxes[i].width){
				if(hitboxes[i].y <= mouseY && mouseY <= hitboxes[i].y + hitboxes[i].height){

					currentPage = pages[hitboxes[i].page];
					// put all the feedback stuff here
					myAudio.play()
					wait = 0;
					break; // this has to go in otherwise the for loop gets REAL confused about what the current page is
				};
			};
		};

		background(myLightBlue[0], myLightBlue[1], myLightBlue[2]);
		
		hitboxes = buttonDimensions(currentPage);
		pageDisplay(currentPage, hitboxes);

	}


	class Button{
		constructor(page, x, y, width, height, color) {
		this.page = page;
		this.x = x;
		this.y = y;
		this.width = width;
		this.height = height;
		this.color = color;
  		}	
	};


	class Page{
		constructor(name, Buttons){
			this.name = name;
			this.NButtons = Buttons[0];
			this.x = Buttons[1];
			this.y = Buttons[2];
			this.width = Buttons[3];
			this.height = Buttons[4];
			this.orientation = Buttons[5];

		}

	};

	  
	var i = 0;
	var x = 200;
	var y = 200;
	var xVel = 9;
	var yVel = -7;
	var spread = 50;
	let myAudio = document.querySelector('#audio')
	let checkSize = 50;
	let wait =0;
	let hangTime = 10;
	let cursorRadius = 50
	

	// hardcode pages here until pages are procedurally generated
	//button set syntax: [NButtons, x, y, width, height, orientation]
	let home = new Page("home", [5, 0, 0, 1000, 200, 0]);
	let pageA = new Page ('A', [1, 0, 0, 200, 200, 0]);
	let pageB = new Page ('B', [2, 0, 0, 200, 200, 0]);
	let pageC = new Page ('C', [3, 0, 0, 200, 200, 0]);
	let pageD = new Page ('D', [4, 0, 0, 200, 200, 0]);
	//let pageExample = new Page ('Example', [5, ])
	let pages = [home, pageA, pageB, pageC, pageD];


	let currentPage = pages[0];

	// color pallette
	var myVeryLightBlue = [224, 230, 254];
	var myLightBlue = [180, 191, 255];
	var myDarkBlue = [103, 119, 204];
	var myLightGreen = [180, 254, 166];
	var myRed = [171, 88, 98];



	draw = function(){

		background(myLightBlue[0], myLightBlue[1], myLightBlue[2]);
		hitboxes = buttonDimensions(currentPage);
		pageDisplay(currentPage, hitboxes);
		fill()

		fill(255, 255, 255);
		
		if(wait<=hangTime){	
			fill(myLightGreen[0], myLightGreen[1], myLightGreen[2]);
			
			wait++;
		}
		ellipse(mouseX, mouseY, 50, 50);
		
	
		console.log(currentPage.name);


	}
	  
	  
	  
	  
	  

	  
	  
	  
    }};


  // Get the canvas that ProcessingJS will use
  var canvas = document.getElementById("mycanvas"); 
  // Pass the function to ProcessingJS constructor
  var processingInstance = new Processing(canvas, programCode); 

  </script>
</html>
